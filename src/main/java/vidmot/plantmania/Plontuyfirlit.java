/**
 * Sérhæfður klasi fyrir yfirlit yfir mínar plöntur og allar plöntur. Á að vera tómt, en svo hlutum bætt í flowpane.
 * <p>
 * setja takka hreinsa snið? Enginn rammi, kannski bara undirstrikaður texti?
 * Hafa menuItems undir sía default flokkana, svo kki þurfi að breyta til að birta almenna yfirlitið
 * <p>
 * Uppruni flokkarnir eru upphaflegu möguleikarnir í sía
 * <p>
 * Hafa þennan klasa, PlontuYfirlit, með fullt af virkni bara sjálfur og gefa honum tilheyrandi vinnsluklasa.
 * Plontuyfirlit tekur inn Planta hluti.
 * <p>
 * Hafa svo annan klasa, MinarPlonturYfirlit, sem erfir frá PlontuYfirlit. (MinarPlonturYfirlit extends PlontuYfirlit).
 * Þar eru nokkur atriði aukalega sem raða má eftir.
 * <p>
 * Plontuyfirlit gæti jafnvel unnið bara útfrá Spjald hlutum, allar mikilvægustu upplýsingarnar eru þar. Og svo gefur
 * Spjald náttúrulega aðgang að Planta hlutnum (minnir mig)
 * <p>
 * Hafa þennan klasa, PlontuYfirlit, með fullt af virkni bara sjálfur og gefa honum tilheyrandi vinnsluklasa.
 * Plontuyfirlit tekur inn Planta hluti.
 * <p>
 * Hafa svo annan klasa, MinarPlonturYfirlit, sem erfir frá PlontuYfirlit. (MinarPlonturYfirlit extends PlontuYfirlit).
 * Þar eru nokkur atriði aukalega sem raða má eftir.
 * <p>
 * Plontuyfirlit gæti jafnvel unnið bara útfrá Spjald hlutum, allar mikilvægustu upplýsingarnar eru þar. Og svo gefur
 * Spjald náttúrulega aðgang að Planta hlutnum (minnir mig)
 * <p>
 * Hafa þennan klasa, PlontuYfirlit, með fullt af virkni bara sjálfur og gefa honum tilheyrandi vinnsluklasa.
 * Plontuyfirlit tekur inn Planta hluti.
 * <p>
 * Hafa svo annan klasa, MinarPlonturYfirlit, sem erfir frá PlontuYfirlit. (MinarPlonturYfirlit extends PlontuYfirlit).
 * Þar eru nokkur atriði aukalega sem raða má eftir.
 * <p>
 * Plontuyfirlit gæti jafnvel unnið bara útfrá Spjald hlutum, allar mikilvægustu upplýsingarnar eru þar. Og svo gefur
 * Spjald náttúrulega aðgang að Planta hlutnum (minnir mig)
 * <p>
 * Hafa þennan klasa, PlontuYfirlit, með fullt af virkni bara sjálfur og gefa honum tilheyrandi vinnsluklasa.
 * Plontuyfirlit tekur inn Planta hluti.
 * <p>
 * Hafa svo annan klasa, MinarPlonturYfirlit, sem erfir frá PlontuYfirlit. (MinarPlonturYfirlit extends PlontuYfirlit).
 * Þar eru nokkur atriði aukalega sem raða má eftir.
 * <p>
 * Plontuyfirlit gæti jafnvel unnið bara útfrá Spjald hlutum, allar mikilvægustu upplýsingarnar eru þar. Og svo gefur
 * Spjald náttúrulega aðgang að Planta hlutnum (minnir mig)
 * <p>
 * Hafa þennan klasa, PlontuYfirlit, með fullt af virkni bara sjálfur og gefa honum tilheyrandi vinnsluklasa.
 * Plontuyfirlit tekur inn Planta hluti.
 * <p>
 * Hafa svo annan klasa, MinarPlonturYfirlit, sem erfir frá PlontuYfirlit. (MinarPlonturYfirlit extends PlontuYfirlit).
 * Þar eru nokkur atriði aukalega sem raða má eftir.
 * <p>
 * Plontuyfirlit gæti jafnvel unnið bara útfrá Spjald hlutum, allar mikilvægustu upplýsingarnar eru þar. Og svo gefur
 * Spjald náttúrulega aðgang að Planta hlutnum (minnir mig)
 * <p>
 * Hafa þennan klasa, PlontuYfirlit, með fullt af virkni bara sjálfur og gefa honum tilheyrandi vinnsluklasa.
 * Plontuyfirlit tekur inn Planta hluti.
 * <p>
 * Hafa svo annan klasa, MinarPlonturYfirlit, sem erfir frá PlontuYfirlit. (MinarPlonturYfirlit extends PlontuYfirlit).
 * Þar eru nokkur atriði aukalega sem raða má eftir.
 * <p>
 * Plontuyfirlit gæti jafnvel unnið bara útfrá Spjald hlutum, allar mikilvægustu upplýsingarnar eru þar. Og svo gefur
 * Spjald náttúrulega aðgang að Planta hlutnum (minnir mig)
 * <p>
 * Hafa þennan klasa, PlontuYfirlit, með fullt af virkni bara sjálfur og gefa honum tilheyrandi vinnsluklasa.
 * Plontuyfirlit tekur inn Planta hluti.
 * <p>
 * Hafa svo annan klasa, MinarPlonturYfirlit, sem erfir frá PlontuYfirlit. (MinarPlonturYfirlit extends PlontuYfirlit).
 * Þar eru nokkur atriði aukalega sem raða má eftir.
 * <p>
 * Plontuyfirlit gæti jafnvel unnið bara útfrá Spjald hlutum, allar mikilvægustu upplýsingarnar eru þar. Og svo gefur
 * Spjald náttúrulega aðgang að Planta hlutnum (minnir mig)
 * <p>
 * Hafa þennan klasa, PlontuYfirlit, með fullt af virkni bara sjálfur og gefa honum tilheyrandi vinnsluklasa.
 * Plontuyfirlit tekur inn Planta hluti.
 * <p>
 * Hafa svo annan klasa, MinarPlonturYfirlit, sem erfir frá PlontuYfirlit. (MinarPlonturYfirlit extends PlontuYfirlit).
 * Þar eru nokkur atriði aukalega sem raða má eftir.
 * <p>
 * Plontuyfirlit gæti jafnvel unnið bara útfrá Spjald hlutum, allar mikilvægustu upplýsingarnar eru þar. Og svo gefur
 * Spjald náttúrulega aðgang að Planta hlutnum (minnir mig)
 */
/**
 * Hafa þennan klasa, PlontuYfirlit, með fullt af virkni bara sjálfur og gefa honum tilheyrandi vinnsluklasa.
 * Plontuyfirlit tekur inn Planta hluti.
 *
 * Hafa svo annan klasa, MinarPlonturYfirlit, sem erfir frá PlontuYfirlit. (MinarPlonturYfirlit extends PlontuYfirlit).
 * Þar eru nokkur atriði aukalega sem raða má eftir.
 *
 * Plontuyfirlit gæti jafnvel unnið bara útfrá Spjald hlutum, allar mikilvægustu upplýsingarnar eru þar. Og svo gefur
 * Spjald náttúrulega aðgang að Planta hlutnum (minnir mig)
 */
package vidmot.plantmania;

import javafx.collections.FXCollections;
import javafx.collections.ListChangeListener;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.Node;
import javafx.scene.control.*;
import javafx.scene.layout.AnchorPane;
import javafx.scene.layout.FlowPane;
import vinnsla.plantmania.MinPlanta;
import vinnsla.plantmania.Planta;

import java.io.IOException;

public class Plontuyfirlit extends AnchorPane {
    @FXML
    private FlowPane fxFlowPane; //aðgangur í flowpane sem inniheldur spjöldin

    @FXML
    private Label notandiLabel;//label í efra hægra horni með notendanafni og icon
    //binda textann við nafn skráðs notanda, kannski best að gera það í PlantController

    @FXML
    private MenuBar fxMenuBar; //til að fá aðgang að menu fyrir snið, nota getChildren();

    @FXML
    private Menu fxSiaMenu;//sia menuið, bein tenging við viðmót

    private ObservableList<MenuItem> checkMenuItems = FXCollections.observableArrayList();
    //ætti kannski bara að innihalda stök 2 og lengra, þau eru þau einu sem geta breyst.

    private ObservableList<Node> syndSpjold = FXCollections.observableArrayList();//Hlutirnir í þessu yfirliti

    public Plontuyfirlit() {
        FXMLLoader loader = new FXMLLoader(getClass().getResource("plontuyfirlit.fxml"));
        loader.setRoot(this);
        loader.setController(this);

        try {
            loader.load();
        } catch (IOException exception) {
            throw new RuntimeException(exception);
        }

        fxFlowPane.getChildren().addListener((ListChangeListener<? super Node>) change -> {
            syndSpjold = fxFlowPane.getChildren();
            System.out.println("fjoldi i syndSpjold: " + syndSpjold.size());
        });

        /*
        syndSpjold = fxFlowPane.getChildren();
        System.out.println("fjoldi i syndSpjold: " + syndSpjold.size());

        syndSpjold = fxFlowPane.getChildren();
        System.out.println("fjoldi i syndSpjold: " + syndSpjold.size());

         */

        //ekki hafa í plontuyfirlit
        //fxFlowPane.getChildren().add(new PlantaSpjald());//gerir bókstaflega ekkert held ég


        //gerir spjald fyrir hverja plöntu á skrá og setur allar í flowpane(birtir þær í yfirliti)
        /*
        LesaPlontur l = new LesaPlontur();
        List<Planta> plontur = l.getPlontur();
        for (int i = 0; i < plontur.size(); i++) {
            PlantaSpjald spj = new PlantaSpjald(plontur.get(i));
            fxFlowPane.getChildren().add(spj);
        }

         */


        siaMenuBreytingar();

    }

    private void siaMenuBreytingar() {
        checkMenuItems.setAll(fxSiaMenu.getItems()); //checkMenuItems er uppfærð útgáfa
        //checkMenuItems.remove(0, 1); //inniheldur bara breytanlegu stökin

        checkMenuItems.addListener((ListChangeListener<? super MenuItem>) change -> {
            change.next();
            if (change.wasRemoved()) fxSiaMenu.getItems().removeAll(change.getRemoved());
            if (change.wasAdded()) fxSiaMenu.getItems().addAll(change.getAddedSubList());
        });

        checkMenuItems.add(new CheckMenuItem("nýtt item"));


        //stilla upphafsstöðu síu, og binda saman fyrsta og öll hin stök síunnar

        //setja binder eða listener þ.a. ef barnalisti sia breytist þá uppfærist viðmótið.
    }

    /**
     *
     * @param planta Planta hlutur, almennt
     */
    public void baetaVidYfirlit(Planta planta) {
        PlantaSpjald spjald = new PlantaSpjald(planta);
        fxFlowPane.getChildren().add(spjald);
    }


    /**
     * Ef inntakið er MinPlanta þá er þetta tilvik af Plontuyfirlit MinPlantaYfirlit í þeim flipa
     * @param planta MinPlanta hlutur
     */
    public void baetaVidYfirlit(MinPlanta planta) {
        MinPlantaSpjald spjald = new MinPlantaSpjald(planta);
        fxFlowPane.getChildren().add(spjald);
    }

    //stilla upphafsstöðu síu, og binda saman fyrsta og öll hin stök síunnar
    private void stillaSia() {
        //ef allir flokkar valdir: efsta valið.
        //annars: efsta ekki valið.

        //Ef smellt á efsta og hak tekið af: setur allt sem óvalið.
        //ef smellt a efsta og hak sett á: allir flokkar valdir


        CheckMenuItem fyrstaItem = (CheckMenuItem) fxSiaMenu.getItems().get(0);

    }


    //      ** getterar og setterar **

    public FlowPane getFxFlowPane() {
        return fxFlowPane;
    }

    //nær í notendanafn af label
    public String getNotandiLabel() {
        return notandiLabel.getText();
    }

    public void setNotandiLabel(String nafn) {
        notandiLabel.setText(nafn);
    }

    public MenuBar getFxMenuBar() {
        return fxMenuBar;
    }

}
